<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Definitely Not Tinder</title>
  <style>
    :root{
      --bg1:#ff5864;
      --bg2:#ff655b;
      --cardRadius: 18px;
      --shadow: 0 20px 60px rgba(0,0,0,.18);
      --text: #0b0b0f;
      --muted: rgba(0,0,0,.55);
      --like: #2fd38a;
      --nope: #ff4d5a;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 800px at 20% 10%, rgba(255,255,255,.35), transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      color:var(--text);
      overflow:hidden;
    }
    .app{
      width:min(420px, 92vw);
      height:min(760px, 92vh);
      height:min(760px, 92dvh); /* âœ… mobile: dynamic viewport height */
      background: rgba(255,255,255,.65);
      backdrop-filter: blur(14px);
      border: 1px solid rgba(255,255,255,.35);
      border-radius: 28px;
      box-shadow: 0 30px 90px rgba(0,0,0,.22);
      display:flex;
      flex-direction:column;
      overflow:hidden;
      position:relative;
    }
    .topbar{
      height:64px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 16px;
    }
    .logo{
      display:flex; align-items:center; gap:10px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .flame{
      width:30px;height:30px;border-radius:10px;
      background: linear-gradient(135deg, #ff2d55, #ff9500);
      display:grid;place-items:center;
      color:#fff;font-weight:900;
      box-shadow: 0 10px 25px rgba(255,45,85,.25);
    }
    .topbtn{
      width:38px;height:38px;border-radius:14px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.7);
      display:grid;place-items:center;
      cursor:pointer;
      user-select:none;
    }
    .topbtn:active{transform:scale(.98)}
    .deck{
      flex:1;
      position:relative;
      padding: 8px 16px 12px;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:0; /* âœ… helps prevent bottom clipping in some mobile layouts */
    }
    .card{
      position:absolute;
      width:100%;
      height:100%;
      border-radius: var(--cardRadius);
      overflow:hidden;
      box-shadow: var(--shadow);
      background:#ddd;
      transform: translate3d(0,0,0) scale(1);
      transition: transform 220ms ease, opacity 220ms ease;
      will-change: transform;
      touch-action: none;
      user-select:none;
    }
    .card::before{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.05) 0%, rgba(0,0,0,.02) 55%, rgba(0,0,0,.55) 100%);
      pointer-events:none;
      z-index:2;
    }
    .card img{
      width:100%;height:100%;
      object-fit:cover;
      display:block;
      filter:saturate(1.05) contrast(1.02);
    }
    .badge{
      position:absolute;
      top:18px;
      padding: 8px 12px;
      border-radius: 14px;
      font-weight:900;
      letter-spacing: 2px;
      font-size: 20px;
      border:4px solid currentColor;
      background: rgba(255,255,255,.06);
      text-transform:uppercase;
      transform: rotate(-16deg);
      opacity:0;
      z-index:3;
      pointer-events:none;
    }
    .badge.like{left:16px;color:var(--like)}
    .badge.nope{right:16px;color:var(--nope); transform: rotate(16deg);}
    .meta{
      position:absolute;
      left:16px;
      right:16px;
      bottom:16px;
      z-index:3;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:10px;
      color:#fff;
    }
    .name{
      font-size: 28px;
      font-weight: 900;
      text-shadow: 0 8px 18px rgba(0,0,0,.35);
      line-height:1.1;
    }
    .subtitle{
      font-size: 14px;
      opacity:.9;
      text-shadow: 0 8px 18px rgba(0,0,0,.35);
      margin-top:6px;
      white-space: pre-line; /* âœ… show \n line breaks */
    }
    .hint{
      font-size: 12px;
      opacity:.8;
      text-align:right;
      text-shadow: 0 8px 18px rgba(0,0,0,.35);
      max-width: 150px;
    }
    .bottombar{
      height:92px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:14px;
      padding: 12px 16px 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.0), rgba(255,255,255,.55));
    }
    .action{
      width:58px;height:58px;
      border-radius: 22px;
      border: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.8);
      box-shadow: 0 18px 35px rgba(0,0,0,.12);
      cursor:pointer;
      display:grid;place-items:center;
      user-select:none;
    }
    .action.big{width:66px;height:66px;border-radius: 26px}
    .action:active{transform:scale(.98)}
    .x{color:var(--nope); font-weight:900; font-size:22px}
    .heart{color:var(--like); font-weight:900; font-size:22px}
    .undo{color:#555; font-weight:900; font-size:18px}

    /* MATCH overlay */
    .match, .final{
      position:absolute;
      inset:0;
      display:none;
      z-index:20;
      align-items:center;
      justify-content:center;
      padding:22px;
      text-align:center;
      background:
        radial-gradient(900px 600px at 50% 30%, rgba(255,255,255,.22), transparent 60%),
        linear-gradient(135deg, rgba(255,45,85,.92), rgba(255,149,0,.92));
      color:#fff;
    }
    .panel{
      width:100%;
      max-width: 380px;
      border-radius: 26px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.25);
      box-shadow: 0 25px 80px rgba(0,0,0,.28);
      padding: 18px 16px 16px;
      backdrop-filter: blur(10px);
    }
    .title{
      font-weight: 1000;
      letter-spacing: 2px;
      font-size: 46px;
      line-height:1;
      text-shadow: 0 10px 30px rgba(0,0,0,.35);
      margin: 8px 0 10px;
    }
    .sub{
      opacity:.95;
      font-size: 14px;
      margin: 0 0 14px;
      text-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .avatars{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:14px;
      margin: 12px 0 14px;
    }
    .avatar{
      width:110px;
      height:150px;
      border-radius: 18px;
      overflow:hidden;
      border: 2px solid rgba(255,255,255,.45);
      box-shadow: 0 20px 50px rgba(0,0,0,.25);
      position:relative;
      background: rgba(255,255,255,.12);
    }
    .avatar img{
      width:100%;height:100%;
      object-fit:cover;
      display:block;
    }
    .cta{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top: 12px;
    }
    button{
      border:0;
      border-radius: 16px;
      padding: 14px 14px;
      font-weight: 900;
      cursor:pointer;
    }
    .btnPrimary{
      background: #fff;
      color: #ff2d55;
      box-shadow: 0 16px 40px rgba(0,0,0,.18);
    }
    .btnGhost{
      background: rgba(255,255,255,.18);
      color:#fff;
      border: 1px solid rgba(255,255,255,.28);
    }
    button:active{transform: scale(.99)}

    /* Final screen extras */
    .final .big{
      font-size: 30px;
      font-weight: 1000;
      margin: 8px 0 8px;
      text-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .final .when{
      display:inline-block;
      margin-top: 6px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.16);
      border: 1px solid rgba(255,255,255,.25);
      font-weight: 900;
      letter-spacing: .2px;
    }
    .final .tiny{
      margin-top: 10px;
      opacity: .92;
      font-size: 13px;
    }

    /* Confetti canvas */
    #confetti{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:30;
      display:none;
    }

    /* âœ… Small-height phones: reduce bottom bar a bit so nothing gets cut */
    @media (max-height: 740px){
      .app{
        height: 96vh;
        height: 96dvh;
        border-radius: 22px;
      }
      .bottombar{
        height:84px;
        padding: 10px 16px 12px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="topbtn" id="helpBtn" title="Help">?</div>
      <div class="logo">
        <div class="flame">V</div>
        <div>Vedantr</div>
      </div>
      <div class="topbtn" id="resetBtn" title="Reset">â†»</div>
    </div>

    <div class="deck" id="deck">
      <canvas id="confetti"></canvas>

      <!-- MATCH overlay (fires on FIRST right swipe ever) -->
      <div class="match" id="match">
        <div class="panel">
          <div class="title">MATCH!</div>
          <p class="sub">You and <b id="matchName">Vedant</b> liked each other. Shockingly predictable.</p>

          <div class="avatars">
            <div class="avatar" title="You">
              <img id="herImg" alt="You" src="img/her.jpeg" />
            </div>
            <div class="avatar" title="Him (current card)">
              <img id="matchImg" alt="Match" />
            </div>
          </div>

          <div class="cta">
            <button class="btnPrimary" id="askBtn">Be my Valentine ðŸ’˜</button>
            <button class="btnGhost" id="keepSwipingBtn">Keep swiping (for fun)</button>
          </div>
        </div>
      </div>

      <!-- FINAL sweet screen (no alerts) -->
      <div class="final" id="final">
        <div class="panel">
          <div class="title">YAY ðŸ’˜</div>
          <div class="big">Itâ€™s a date.</div>
          <div class="when">Friday night â€¢ 8:30pm</div>
          <div class="tiny">Dress code: whatever makes you feel cute. Clothing Optional ðŸ˜Œ</div>

          <div class="cta" style="margin-top:14px;">
            <button class="btnPrimary" id="finalClose">Close</button>
            <button class="btnGhost" id="finalKeep">Back to swiping</button>
          </div>
        </div>
      </div>
    </div>

    <div class="bottombar">
      <div class="action" id="undoBtn" title="Undo"><span class="undo">â†©</span></div>
      <div class="action big" id="nopeBtn" title="Nope"><span class="x">âœ•</span></div>
      <div class="action big" id="likeBtn" title="Like"><span class="heart">â™¥</span></div>
    </div>
  </div>

  <script>
    /**
     * Put your images in /img and update these:
     */
    const PROFILES = [
      { name: "1st Catania Night Vedu", subtitle: "Remembers old memories a little too well. Knows good Italian food. Acts casual, but that night was anything but. Swipe right if you like reliving core memories(Smirk sold separately)", img: "img/vedant1.jpeg" },

      { name: "Sweet Gesture Vedu",
        subtitle: "Picks you up from the airport. Does sweet things and pretends itâ€™s no big deal. Slowly realizes heâ€™s very much in love. Swipe right if you like personal gestures(like this one lmao)",
        img: "img/vedant2.jpeg"
      },

      { name: "1st Valentine Vedu",
        subtitle: "Buys you flowers. Makes Valentineâ€™s feel intentional. What happened for the first time that night may happen again. Swipe right if you're down to relive that ðŸ˜‰",
        img: "img/vedant3.jpeg"
      },

      { name: "Lovey Vedu", subtitle: "Tells you he loves you. Tells you why. Tells you again, just in case. Swipe right for the love", img: "img/vedant4.jpeg" },
      { name: "Summer Vedu", subtitle: "Loves binge-watching shows with you, eating a lot, and that other thing we did every day that summer ðŸ˜‰ Swipe right for peak comfort", img: "img/vedant5.jpeg" },
      { name: "Bombay Vedu", subtitle: "Elite host. Plans everything so you donâ€™t have to. You just show up and enjoy. Swipe right for a stress-free night, guaranteed.", img: "img/vedant6.jpeg" },
      { name: "Lage Raho Bombay Vedu", subtitle: "Bombay Vedu, but evolved. Says the three magic words that Manya always wants to hear: â€œWhatever you want.â€ Dangerously accommodating. Swipe right to have your way", img: "img/vedant7.jpeg" },
      { name: "Goofy Vedu", subtitle: "Makes elite dad jokes and yaps with you all night long. Swipe right. Laughs included, sleep optional.", img: "img/vedant10.jpeg" },
      { name: "Lets You Yap Vedu", subtitle: "Will let you yap. Best listener ever. Will remember everything you said. Swipe right to be heard", img: "img/vedant8.jpeg" },
      { name: "Dadaji Vedu", subtitle: "Family-friendly, PG13 vedu. The kind you can bring home to Kamlesh and Ashwini(speaks Hindi too - soon to be a rare skill in your family :p). Will watch Bollywood movies with you(even ZNMD). Swipe right for Sanskaar", img: "img/vedant9.jpeg" },
    ];

    // Feel tweaks:
    const SWIPE_THRESHOLD = 110;
    const ROTATION_MAX = 14;
    const OFFSCREEN_X = 420;
    const OFFSCREEN_Y = 70;
    const STACK_SCALE_STEP = 0.03;
    const STACK_Y_STEP = 8;

    const deck = document.getElementById("deck");

    const matchEl = document.getElementById("match");
    const matchNameEl = document.getElementById("matchName");
    const matchImgEl = document.getElementById("matchImg");
    const askBtn = document.getElementById("askBtn");
    const keepSwipingBtn = document.getElementById("keepSwipingBtn");

    const finalEl = document.getElementById("final");
    const finalClose = document.getElementById("finalClose");
    const finalKeep = document.getElementById("finalKeep");

    const confettiCanvas = document.getElementById("confetti");
    const ctx = confettiCanvas.getContext("2d");

    const nopeBtn = document.getElementById("nopeBtn");
    const likeBtn = document.getElementById("likeBtn");
    const undoBtn = document.getElementById("undoBtn");
    const resetBtn = document.getElementById("resetBtn");
    const helpBtn  = document.getElementById("helpBtn");

    // --- Subtle audio (generated tones; no external files)
    let audioCtx = null;
    function ensureAudio(){
      if(!audioCtx){
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      if(audioCtx.state === "suspended") audioCtx.resume().catch(()=>{});
    }
    function tone({freq=440, duration=0.06, type="sine", gain=0.03, ramp=0.02}){
      if(!audioCtx) return;
      const t0 = audioCtx.currentTime;
      const osc = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      osc.type = type;
      osc.frequency.setValueAtTime(freq, t0);
      g.gain.setValueAtTime(0.0001, t0);
      g.gain.exponentialRampToValueAtTime(gain, t0 + ramp);
      g.gain.exponentialRampToValueAtTime(0.0001, t0 + duration);
      osc.connect(g).connect(audioCtx.destination);
      osc.start(t0);
      osc.stop(t0 + duration + 0.02);
    }
    function sfxSwipeRight(){ tone({freq: 660, duration: 0.06, type:"triangle", gain:0.03}); tone({freq: 880, duration: 0.05, type:"triangle", gain:0.022}); }
    function sfxSwipeLeft(){  tone({freq: 220, duration: 0.07, type:"sine", gain:0.03}); tone({freq: 180, duration: 0.07, type:"sine", gain:0.02}); }
    function sfxMatch(){ tone({freq: 523.25, duration:0.07, type:"triangle", gain:0.035}); tone({freq: 659.25, duration:0.07, type:"triangle", gain:0.03}); tone({freq: 783.99, duration:0.10, type:"triangle", gain:0.028}); }

    // --- State
    let index = 0;
    let history = []; // {profile, decision}
    let isOverlayOpen = false;
    let hasMatchedOnce = false; // âœ… match on FIRST right swipe ever

    // --- Confetti (lightweight)
    let confettiPieces = [];
    let confettiRaf = null;

    function resizeConfetti(){
      const rect = confettiCanvas.getBoundingClientRect();
      confettiCanvas.width = Math.floor(rect.width * devicePixelRatio);
      confettiCanvas.height = Math.floor(rect.height * devicePixelRatio);
      ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener("resize", resizeConfetti);

    function startConfetti(durationMs = 1600){
      resizeConfetti();
      confettiCanvas.style.display = "block";

      const W = confettiCanvas.getBoundingClientRect().width;
      const H = confettiCanvas.getBoundingClientRect().height;

      confettiPieces = [];
      const count = 90; // subtle
      for(let i=0;i<count;i++){
        confettiPieces.push({
          x: Math.random() * W,
          y: -20 - Math.random() * H * 0.3,
          vx: (Math.random() - 0.5) * 2.2,
          vy: 2.3 + Math.random() * 2.8,
          size: 6 + Math.random() * 6,
          rot: Math.random() * Math.PI,
          vr: (Math.random() - 0.5) * 0.2,
          alpha: 0.85,
        });
      }

      const start = performance.now();
      cancelAnimationFrame(confettiRaf);

      function frame(now){
        const elapsed = now - start;
        const fade = Math.min(Math.max((durationMs - elapsed) / 600, 0), 1);

        ctx.clearRect(0,0, confettiCanvas.width, confettiCanvas.height);

        confettiPieces.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          p.alpha = 0.2 + 0.65 * fade;

          ctx.save();
          ctx.globalAlpha = p.alpha;
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.globalCompositeOperation = "screen";
          ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
          ctx.restore();
        });

        if(elapsed < durationMs){
          confettiRaf = requestAnimationFrame(frame);
        } else {
          confettiCanvas.style.display = "none";
          ctx.clearRect(0,0, confettiCanvas.width, confettiCanvas.height);
        }
      }
      confettiRaf = requestAnimationFrame(frame);
    }

    function escapeHTML(str){
      return String(str).replace(/[&<>"']/g, s => ({
        "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#039;"
      }[s]));
    }

    function createCard(profile, positionFromTop){
      const card = document.createElement("div");
      card.className = "card";

      const scale = 1 - (positionFromTop * STACK_SCALE_STEP);
      const y = positionFromTop * STACK_Y_STEP;
      card.style.transform = `translate3d(0, ${y}px, 0) scale(${scale})`;

      const img = document.createElement("img");
      img.src = profile.img;
      img.alt = profile.name;

      const like = document.createElement("div");
      like.className = "badge like";
      like.textContent = "LIKE";

      const nope = document.createElement("div");
      nope.className = "badge nope";
      nope.textContent = "NOPE";

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.innerHTML = `
        <div>
          <div class="name">${escapeHTML(profile.name)}</div>
          <div class="subtitle">${escapeHTML(profile.subtitle || "")}</div>
        </div>
        <div class="hint">Swipe right if you like this version of me. Multiple right swipes allowed</div>
      `;

      card.appendChild(img);
      card.appendChild(like);
      card.appendChild(nope);
      card.appendChild(meta);

      return card;
    }

    function render(){
      [...deck.querySelectorAll(".card")].forEach(c => c.remove());

      const remaining = PROFILES.slice(index);

      if(remaining.length === 0){
        index = 0;
        history = [];
        render();
        return;
      }

      const toRender = remaining.slice(0, 3).reverse();
      toRender.forEach((profile, i) => {
        const positionFromTop = (toRender.length - 1) - i;
        const card = createCard(profile, positionFromTop);
        deck.appendChild(card);
      });

      attachTopCardHandlers();
    }

    function attachTopCardHandlers(){
      const cards = deck.querySelectorAll(".card");
      if(cards.length === 0) return;
      const topCard = cards[cards.length - 1];

      let startX=0, startY=0;
      let currentX=0, currentY=0;
      let isDragging=false;

      const likeBadge = topCard.querySelector(".badge.like");
      const nopeBadge = topCard.querySelector(".badge.nope");

      const onPointerDown = (e) => {
        if(isOverlayOpen) return;
        ensureAudio();
        isDragging = true;
        topCard.style.transition = "none";
        startX = e.clientX;
        startY = e.clientY;
      };

      const onPointerMove = (e) => {
        if(!isDragging || isOverlayOpen) return;
        currentX = e.clientX - startX;
        currentY = e.clientY - startY;

        const rot = clamp((currentX / 320) * ROTATION_MAX, -ROTATION_MAX, ROTATION_MAX);
        topCard.style.transform = `translate3d(${currentX}px, ${currentY}px, 0) rotate(${rot}deg)`;

        const opacity = Math.min(Math.abs(currentX) / 120, 1);
        if(currentX > 0){
          likeBadge.style.opacity = opacity;
          nopeBadge.style.opacity = 0;
        } else {
          nopeBadge.style.opacity = opacity;
          likeBadge.style.opacity = 0;
        }
      };

      const onPointerUp = () => {
        if(!isDragging || isOverlayOpen) return;
        isDragging = false;

        const absX = Math.abs(currentX);
        if(absX > SWIPE_THRESHOLD){
          const dir = currentX > 0 ? "right" : "left";
          fling(topCard, dir);
        } else {
          topCard.style.transition = "transform 220ms ease";
          topCard.style.transform = "";
          likeBadge.style.opacity = 0;
          nopeBadge.style.opacity = 0;
        }
        currentX = 0; currentY = 0;
      };

      topCard.addEventListener("pointerdown", onPointerDown);
      window.addEventListener("pointermove", onPointerMove);
      window.addEventListener("pointerup", onPointerUp, { once:false });

      topCard.querySelector("img").addEventListener("dragstart", e => e.preventDefault());

      function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

      function fling(card, dir){
        if(isOverlayOpen) return;

        const decision = (dir === "right") ? "like" : "nope";
        const profile = PROFILES[index];

        if(decision === "like") sfxSwipeRight(); else sfxSwipeLeft();

        card.style.transition = "transform 260ms ease, opacity 260ms ease";
        const x = dir === "right" ? OFFSCREEN_X : -OFFSCREEN_X;
        const y = (Math.random() * OFFSCREEN_Y) - (OFFSCREEN_Y/2);
        const rot = dir === "right" ? ROTATION_MAX : -ROTATION_MAX;
        card.style.transform = `translate3d(${x}px, ${y}px, 0) rotate(${rot}deg)`;
        card.style.opacity = "0.2";

        history.push({ profile, decision });
        index++;

        const shouldMatchNow = (decision === "like" && !hasMatchedOnce);

        setTimeout(() => {
          render();
          if(shouldMatchNow){
            hasMatchedOnce = true;
            openMatch(profile);
          }
        }, 220);
      }

      nopeBtn.onclick = () => fling(topCard, "left");
      likeBtn.onclick = () => fling(topCard, "right");

      undoBtn.onclick = () => {
        if(isOverlayOpen) return;
        if(history.length === 0) return;
        history.pop();
        index = Math.max(0, index - 1);
        render();
      };
    }

    function openMatch(profile){
      isOverlayOpen = true;
      matchNameEl.textContent = profile.name;
      matchImgEl.src = profile.img;
      matchEl.style.display = "flex";
      sfxMatch();
      startConfetti(1700);
    }

    function closeMatch(){
      matchEl.style.display = "none";
      isOverlayOpen = false;
    }

    function openFinal(optionalLine){
      isOverlayOpen = true;
      finalEl.style.display = "flex";
      sfxMatch();
      startConfetti(1600);

      const tiny = finalEl.querySelector(".tiny");
      if(optionalLine){
        tiny.textContent = optionalLine;
      } else {
        tiny.textContent = "Dress code: whatever makes you feel cute. Iâ€™ll handle the rest ðŸ˜Œ";
      }
    }

    function closeFinal(){
      finalEl.style.display = "none";
      isOverlayOpen = false;
    }

    askBtn.onclick = () => {
      ensureAudio();
      closeMatch();
      openFinal();
    };
    keepSwipingBtn.onclick = () => {
      ensureAudio();
      closeMatch();
    };

    finalClose.onclick = () => {
      ensureAudio();
      closeFinal();
    };
    finalKeep.onclick = () => {
      ensureAudio();
      closeFinal();
    };

    resetBtn.onclick = () => {
      closeMatch();
      closeFinal();
      index = 0;
      history = [];
      hasMatchedOnce = false;
      render();
    };

    helpBtn.onclick = () => {
      alert(
        "How to play:\n\nâ€¢ Swipe right = LIKE\nâ€¢ Swipe left = NOPE\n\nSpecial:\nâ€¢ The FIRST time you swipe right, itâ€™s an instant MATCH ðŸ’˜\nâ€¢ After that, keep swiping just for fun."
      );
    };

    render();
  </script>
</body>
</html>
